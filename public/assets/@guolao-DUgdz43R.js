import{l as e}from"./@monaco-editor-BDZWgZ9J.js";import{d as t,s as a,c as l,o as i,w as o,h as n,a as r,n as u,r as d}from"./@vue-DvSXG8OY.js";var s=Object.defineProperty,v=Object.defineProperties,g=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,a)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,y=(e,t)=>{for(var a in t||(t={}))c.call(t,a)&&m(e,a,t[a]);if(f)for(var a of f(t))p.call(t,a)&&m(e,a,t[a]);return e};const h={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}};function S(e,t){return{wrapperStyle:l((()=>{const{width:t,height:a}=e;return l=y({},h.wrapper),v(l,g({width:t,height:a}));var l})),containerStyle:l((()=>y(y({},h.fullWidth),!t.value&&h.hide)))}}function M(){const t=a(e.__getMonacoInstance()),l=d(!1);let i;r((()=>{t.value||(i=e.init(),i.then((e=>t.value=e)).catch((e=>{"cancelation"!==(null==e?void 0:e.type)&&(l.value=!0,console.error("Monaco initialization error:",e))})))}));return{monacoRef:t,unload:()=>null==i?void 0:i.cancel(),isLoadFailed:l}}function b(e){return"function"==typeof e?e():e}function O(e){return void 0===e}function w(e,t,a,l){return function(e,t){return e.editor.getModel(L(e,t))}(e,l)||function(e,t,a,l){return e.editor.createModel(t,a,l?L(e,l):void 0)}(e,t,a,l)}function L(e,t){return e.Uri.parse(t)}var P=Object.defineProperty,j=Object.getOwnPropertySymbols,V=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,R=(e,t,a)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const x={display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"};var N=t({name:"VueMonacoEditor",model:{prop:"value",event:"update:value"},props:{defaultValue:String,defaultPath:String,defaultLanguage:String,value:String,language:String,path:String,theme:{type:String,default:"vs"},line:Number,options:{type:Object,default:()=>({})},overrideServices:{type:Object,default:()=>({})},saveViewState:{type:Boolean,default:!0},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"},className:String},emits:["update:value","beforeMount","mount","change","validate"],setup(e,t){const n=new Map,s=a(null),{monacoRef:v,unload:g,isLoadFailed:f}=M(),{editorRef:c}=function({emit:e},t,l,i){const n=a(null);function d(){var a;if(!i.value||!l.value||n.value)return;e("beforeMount",l.value);const o=t.path||t.defaultPath,r=w(l.value,t.value||t.defaultValue||"",t.language||t.defaultLanguage||"",o||"");n.value=l.value.editor.create(i.value,((e,t)=>{for(var a in t||(t={}))V.call(t,a)&&R(e,a,t[a]);if(j)for(var a of j(t))E.call(t,a)&&R(e,a,t[a]);return e})({model:r,theme:t.theme,automaticLayout:!0,autoIndent:"brackets",formatOnPaste:!0,formatOnType:!0},t.options),t.overrideServices),null==(a=n.value)||a.onDidChangeModelContent((a=>{const l=n.value.getValue();l!==t.value&&(e("update:value",l),e("change",l,a))})),n.value&&!O(t.line)&&n.value.revealLine(t.line),e("mount",n.value,l.value)}return r((()=>{const e=o(l,(()=>{i.value&&l.value&&(u((()=>e())),d())}),{immediate:!0})})),{editorRef:n}}(t,e,v,s),{disposeValidator:p}=function({emit:e},t,a,l){const i=d(null),n=o([a,l],(()=>{if(a.value&&l.value){u((()=>n()));const t=a.value.editor.onDidChangeMarkers((t=>{var i,o;const n=null==(o=null==(i=l.value)?void 0:i.getModel())?void 0:o.uri;if(n){if(t.find((e=>e.path===n.path))){const t=a.value.editor.getModelMarkers({resource:n});e("validate",t)}}}));i.value=()=>null==t?void 0:t.dispose()}}));return{disposeValidator:i}}(t,0,v,c),m=l((()=>!!v.value&&!!c.value)),{wrapperStyle:y,containerStyle:h}=S(e,m);return i((()=>{var e,t;null==(e=p.value)||e.call(p),c.value?(null==(t=c.value.getModel())||t.dispose(),c.value.dispose()):g()})),o((()=>e.path),((t,a)=>{const l=w(v.value,e.value||e.defaultValue||"",e.language||e.defaultLanguage||"",t||e.defaultPath||"");l!==c.value.getModel()&&(e.saveViewState&&n.set(a,c.value.saveViewState()),c.value.setModel(l),e.saveViewState&&c.value.restoreViewState(n.get(t)))})),o((()=>e.value),(e=>{c.value&&c.value.getValue()!==e&&c.value.setValue(e)})),o((()=>e.options),(e=>c.value&&c.value.updateOptions(e)),{deep:!0}),o((()=>e.theme),(e=>v.value&&v.value.editor.setTheme(e))),o((()=>e.language),(e=>m.value&&v.value.editor.setModelLanguage(c.value.getModel(),e))),o((()=>e.line),(e=>{c.value&&!O(e)&&c.value.revealLine(e)})),{containerRef:s,isEditorReady:m,isLoadFailed:f,wrapperStyle:y,containerStyle:h}},render(){const{$slots:e,isEditorReady:t,isLoadFailed:a,wrapperStyle:l,containerStyle:i,className:o}=this;return n("div",{style:l},[!t&&n("div",{style:x},a?e.failure?b(e.failure):"load failed":e.default?b(e.default):"loading..."),n("div",{ref:"containerRef",key:"monaco_editor_container",style:i,class:o})])}});var F=Object.defineProperty,I=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,_=(e,t,a)=>t in e?F(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const C={display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"};var T=t({name:"VueMonacoDiffEditor",props:{original:String,modified:String,language:String,originalLanguage:String,modifiedLanguage:String,originalModelPath:String,modifiedModelPath:String,theme:{type:String,default:"vs"},options:{type:Object,default:()=>({})},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"},className:String},setup(e,t){const n=a(null),{monacoRef:d,unload:s,isLoadFailed:v}=M(),{diffEditorRef:g}=function({emit:e},t,l,i){const n=a(null);function d(){var a;if(!i.value||!l.value||n.value)return;e("beforeMount",l.value),n.value=l.value.editor.createDiffEditor(i.value,((e,t)=>{for(var a in t||(t={}))k.call(t,a)&&_(e,a,t[a]);if(I)for(var a of I(t))D.call(t,a)&&_(e,a,t[a]);return e})({automaticLayout:!0,autoIndent:"brackets",theme:t.theme,formatOnPaste:!0,formatOnType:!0},t.options));const o=w(l.value,t.original||"",t.originalLanguage||t.language||"text",t.originalModelPath||""),r=w(l.value,t.modified||"",t.modifiedLanguage||t.language||"text",t.modifiedModelPath||"");null==(a=n.value)||a.setModel({original:o,modified:r}),e("mount",n.value,l.value)}return r((()=>{const e=o(l,(()=>{i.value&&l.value&&(u((()=>e())),d())}),{immediate:!0})})),{diffEditorRef:n}}(t,e,d,n),f=l((()=>!!d.value&&!!g.value)),{wrapperStyle:c,containerStyle:p}=S(e,f);return i((()=>{var e,t,a,l,i,o,n,r;!d.value&&s();const u=null==(t=null==(e=g.value)?void 0:e.getModel)?void 0:t.call(e);null==(l=null==(a=null==u?void 0:u.original)?void 0:a.dispose)||l.call(a),null==(o=null==(i=null==u?void 0:u.modified)?void 0:i.dispose)||o.call(i),null==(r=null==(n=g.value)?void 0:n.dispose)||r.call(n)})),o((()=>e.originalModelPath),(()=>{if(!d.value||!g.value)return;const t=g.value.getOriginalEditor(),a=w(d.value,e.original||"",e.originalLanguage||e.language||"text",e.originalModelPath||"");a!==t.getModel()&&t.setModel(a)})),o((()=>e.modifiedModelPath),(()=>{if(!d.value||!g.value)return;const t=g.value.getModifiedEditor(),a=w(d.value,e.modified||"",e.modifiedLanguage||e.language||"text",e.modifiedModelPath||"");a!==t.getModel()&&t.setModel(a)})),o((()=>e.modified),(()=>{if(!f.value)return;const t=g.value.getModifiedEditor();t.getOption(d.value.editor.EditorOption.readOnly)?t.setValue(e.modified||""):e.modified!==t.getValue()&&(t.executeEdits("",[{range:t.getModel().getFullModelRange(),text:e.modified||"",forceMoveMarkers:!0}]),t.pushUndoStop())})),o((()=>e.original),(()=>{var t,a;null==(a=null==(t=g.value)?void 0:t.getModel())||a.original.setValue((null==e?void 0:e.original)||"")})),o((()=>[e.language,e.originalLanguage,e.modifiedLanguage]),(()=>{if(!f.value)return;const{original:t,modified:a}=g.value.getModel();d.value.editor.setModelLanguage(t,e.originalLanguage||e.language||"text"),d.value.editor.setModelLanguage(a,e.originalLanguage||e.language||"text")})),o((()=>e.theme),(()=>{var t;return null==(t=d.value)?void 0:t.editor.setTheme(e.theme)})),o((()=>e.options),(()=>{var t;return null==(t=g.value)?void 0:t.updateOptions(e.options)}),{deep:!0}),{containerRef:n,isDiffEditorReady:f,isLoadFailed:v,wrapperStyle:c,containerStyle:p}},render(){const{$slots:e,isDiffEditorReady:t,isLoadFailed:a,wrapperStyle:l,containerStyle:i,className:o}=this;return n("div",{style:l},[!t&&n("div",{style:C},a?e.failure?b(e.failure):"load failed":e.default?b(e.default):"loading..."),n("div",{ref:"containerRef",key:"monaco_diff_editor_container",style:i,class:o})])}});function U(t,a){a&&e.config(a),t.component(N.name,N),t.component(T.name,T)}export{U as i};
