import{m as a,a as t}from"./vuex-CBJTNNbk.js";import{h as e,n as i}from"./index-Svkr8qAM.js";import{h as s}from"./moment-i-YsoRPj.js";import{r as n,a3 as o,b as r,e as d,f as l,p as c,i as m,g as p,A as f,C as u,q as h,F as g,k as w,t as v}from"./@vue-DvSXG8OY.js";import{_ as N}from"./vue3-excel-editor-BZIQ-9GP.js";const b={name:"Main",data:()=>({draw:!1,refreshInterval:null}),setup(){const a=n();return{dropdownElement:a,dropdown:e(a)}},computed:{...a(["unreadNotifications","path","getRole"])},mounted(){"web_master"!=this.getRole&&this.updateNotifications()},watch:{dropdown:{handler(a){if(this.draw=a.isOpen,a.isOpen&&this.unreadNotifications.length){let a=this.unreadNotifications.map((function(a){return a.id}));this.readNotifications({ids:a}),this.unreadNotifications=[]}else this.getUnreadNotifications()},deep:!0}},methods:{...t(["readNotifications","getUnreadNotifications"]),updateNotifications(){this.refreshInterval=setInterval((()=>{this.draw||"visible"===document.visibilityState&&this.getUnreadNotifications()}),1e4)},readNotification(){},dateFormat:a=>s(a).fromNow()}},k={class:"toolbar-notifications is-hidden-mobile"},y={ref:"dropdownElement",class:"dropdown is-spaced is-dots is-right dropdown-trigger"},_=l("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:bell"},null,-1),E={key:0,class:"new-indicator pulsate"},F={class:"dropdown-menu",role:"menu"},I={class:"dropdown-content"},j={class:"heading"},x=l("div",{class:"heading-left"},[l("h6",{class:"heading-title"},"Notifications")],-1),O={class:"heading-right"},C={class:"notification-list"},R={key:0,class:"notification-item"},T={class:"img-left mr-2"},U={class:"user-content"},D={class:"user-info"},L={class:"name"},M={class:"name"},S=l("br",null,null,-1),q={class:"time"},A={key:1,class:"notification-item"},K={class:"img-left"},z={class:"user-content"},B={class:"user-info"},G={class:"name"},H={class:"name"},J=l("br",null,null,-1),P={class:"time"};const Q=N(b,[["render",function(a,t,e,s,n,N){const b=o("RouterLink");return r(),d("div",k,[l("div",y,[l("div",{tabindex:"0",class:"is-trigger","aria-haspopup":"true",onClick:t[0]||(t[0]=(...a)=>s.dropdown.toggle&&s.dropdown.toggle(...a)),onKeydown:t[1]||(t[1]=c(m(((...a)=>s.dropdown.toggle&&s.dropdown.toggle(...a)),["prevent"]),["space"]))},[_,a.unreadNotifications.length&&!this.draw?(r(),d("span",E)):p("",!0)],32),l("div",F,[l("div",I,[l("div",j,[x,l("div",O,[f(b,{class:"notification-link",to:"/"+a.path+"/notifications"},{default:u((()=>[h(" See all ")])),_:1},8,["to"])])]),l("ul",C,[(r(!0),d(g,null,w(a.unreadNotifications,((e,s)=>(r(),d("li",{key:s},[e.data.type?(r(),d("a",R,[l("div",T,[l("img",{class:"user-photo",alt:"",src:i,onErrorOnce:t[2]||(t[2]=t=>a.onceImageErrored(150))},null,32)]),l("div",U,[l("p",D,[3==e.data.action?(r(),d(g,{key:0},[l("span",L,v(e.data.name),1),h(" - Three leads in a row were not sent ")],64)):5==e.data.action?(r(),d(g,{key:1},[l("span",M,v(e.data.name),1),h(" - Five leads in a row were not sent "),S,2==e.data.disable?(r(),d(g,{key:0},[h("The campaign was switched off")],64)):p("",!0)],64)):p("",!0)]),l("p",q,v(N.dateFormat(e.created_at)),1)])])):(r(),d("a",A,[l("div",K,[l("img",{class:"user-photo",alt:"",src:i,onErrorOnce:t[3]||(t[3]=t=>a.onceImageErrored(150))},null,32)]),l("div",z,[l("p",B,[l("span",G,v(e.data.name),1),h(" new FTD on "),l("span",H,"Lead #"+v(e.data.id),1),J,h(" Created Date - "+v(e.data.created_at),1)]),l("p",P,v(N.dateFormat(e.created_at)),1)])]))])))),128))])])])],512)])}]]);export{Q as _};
